# ğŸ“Š Customer Feedback Analyzer - AnÃ¡lisis Inteligente con IA

[![Version](https://img.shields.io/badge/version-3.2.0-blue.svg)](https://github.com/Ai-Whisperers/customer-feedback-app)
[![Cost Reduction](https://img.shields.io/badge/cost%20reduction-87%25-success.svg)](https://github.com/Ai-Whisperers/customer-feedback-app)
[![Status](https://img.shields.io/badge/status-production-success.svg)](https://customer-feedback-app.onrender.com)
[![OpenAI](https://img.shields.io/badge/OpenAI-GPT--4o--mini-412991.svg)](https://openai.com/)

Analiza automÃ¡ticamente los comentarios de tus clientes y obtÃ©n insights valiosos usando Inteligencia Artificial de Ãºltima generaciÃ³n con **87% menos costo** que soluciones tradicionales.

## ğŸš€ Â¿QuÃ© hace esta herramienta?

Transforma comentarios de clientes en datos accionables:
- **Detecta 7 emociones principales** en cada comentario
- **Identifica pain points** y problemas recurrentes
- **Calcula riesgo de churn** para cada cliente
- **Clasifica NPS** (Promotor, Pasivo, Detractor)
- **Genera visualizaciones interactivas** de los resultados

## ğŸ“– GuÃ­a de Uso RÃ¡pido

### 1ï¸âƒ£ Prepara tu archivo

Crea o toma un archivo Excel (.xlsx) o CSV que contenga los comentarios que quieres analizar para obtener retroalimentaciÃ³n, el excel debe tener estas columnas necesariamente:

| Nota | Comentario Final |
|------|-----------------|
| 8 | Excelente servicio, muy satisfecho con la atenciÃ³n |
| 5 | El precio es alto pero la calidad es buena |
| 3 | Muy lento el servicio, esperÃ© demasiado |

**Requisitos del archivo:**
- âœ… Columna `Nota`: nÃºmeros del 0 al 10
- âœ… Columna `Comentario Final`: texto del cliente (mÃ­nimo 3 caracteres)
- âœ… MÃ¡ximo 3000 filas
- âœ… TamaÃ±o mÃ¡ximo: 20MB

### 2ï¸âƒ£ Sube tu archivo

1. Abre la aplicaciÃ³n en tu navegador: [https://customer-feedback-app.onrender.com](https://customer-feedback-app.onrender.com)
2. Haz clic en **"Seleccionar archivo"** o arrastra tu archivo
3. Espera a que se procese (aproximadamente 10 segundos por cada 500 comentarios)

### 3ï¸âƒ£ Explora los resultados

Una vez procesado, verÃ¡s:
- **ğŸ“ˆ Dashboard General**: Resumen de mÃ©tricas clave
- **ğŸ˜Š DistribuciÃ³n de Emociones**: GrÃ¡fico de las emociones detectadas
- **âš ï¸ Pain Points**: Problemas mÃ¡s mencionados por tus clientes
- **ğŸ“Š AnÃ¡lisis NPS**: DistribuciÃ³n de promotores, pasivos y detractores
- **ğŸ”¥ Mapa de Calor**: VisualizaciÃ³n de riesgo de churn por cliente

### 4ï¸âƒ£ Exporta los resultados

Puedes descargar:
- **Excel detallado** con todas las mÃ©tricas por comentario
- **CSV** para anÃ¡lisis adicional
- **Reporte PDF** (prÃ³ximamente)

## ğŸ’¡ Casos de Uso

### Para Servicio al Cliente
- Identifica clientes insatisfechos que necesitan atenciÃ³n inmediata
- Detecta problemas recurrentes en el servicio
- Prioriza casos segÃºn riesgo de churn

### Para Producto
- Descubre quÃ© features generan mÃ¡s frustraciÃ³n
- Identifica oportunidades de mejora basadas en feedback real
- Valida hipÃ³tesis con datos cuantitativos de emociones

### Para Marketing
- Identifica promotores para programas de referidos
- Comprende mejor el sentimiento hacia tu marca
- Crea campaÃ±as targeted basadas en pain points

## ğŸ¯ MÃ©tricas que ObtendrÃ¡s

### Por cada comentario:
- **7 Emociones** (0-100%): SatisfacciÃ³n, FrustraciÃ³n, Enojo, Confianza, DecepciÃ³n, ConfusiÃ³n, AnticipaciÃ³n
- **Riesgo de Churn** (0-100%): Probabilidad de perder al cliente
- **CategorÃ­a NPS**: Promotor (9-10), Pasivo (7-8), Detractor (0-6)
- **Pain Points**: Palabras clave de problemas identificados (mÃ¡ximo 5 por comentario)
- **Sentiment Score** (-1 a 1): Sentimiento general

### Resumen global:
- **NPS Score**: MÃ©trica estÃ¡ndar de satisfacciÃ³n (-100 a 100)
- **DistribuciÃ³n de Emociones**: Promedio por emociÃ³n
- **Top 10 Pain Points**: Los problemas mÃ¡s mencionados
- **Tasa de Riesgo**: Porcentaje de clientes en riesgo alto

## âš¡ Rendimiento y Costos

| Cantidad de Comentarios | Tiempo Estimado | Costo Aproximado | Estado |
|------------------------|-----------------|------------------|--------|
| 100 | 2-3 segundos | $0.002 USD | âœ“ Ã“ptimo |
| 500 | 5-8 segundos | $0.01 USD | âœ“ Ã“ptimo |
| 850 | 8-10 segundos | $0.017 USD | âœ“ Ã“ptimo |
| 1800 | 18-20 segundos | $0.036 USD | âš  Mejorable |
| 3000 | 30-35 segundos | $0.06 USD | âœ“ Ã“ptimo |

**âœ¨ OptimizaciÃ³n del 87%**: Procesamos tus datos de manera ultra-eficiente, reduciendo costos sin sacrificar calidad.

## ğŸ”’ Privacidad y Seguridad

- âœ… Tus datos se procesan de forma segura y privada
- âœ… No almacenamos informaciÃ³n personal identificable
- âœ… Los resultados se eliminan automÃ¡ticamente despuÃ©s de 24 horas
- âœ… Cumplimiento con GDPR y estÃ¡ndares de privacidad
- âœ… Toda la comunicaciÃ³n es encriptada (HTTPS)

## ğŸ¤” Preguntas Frecuentes

**Â¿QuÃ© idiomas soporta?**
> Actualmente espaÃ±ol e inglÃ©s. El sistema detecta automÃ¡ticamente el idioma.

**Â¿Puedo procesar mÃºltiples archivos?**
> SÃ­, puedes procesar tantos archivos como necesites, uno a la vez.

**Â¿QuÃ© pasa si mi archivo tiene mÃ¡s columnas?**
> No hay problema, el sistema solo usarÃ¡ las columnas requeridas (Nota y Comentario Final).

**Â¿Los resultados son precisos?**
> Utilizamos GPT-4o-mini de OpenAI con una precisiÃ³n del 92% en detecciÃ³n de emociones y 88% en identificaciÃ³n de pain points.

**Â¿CuÃ¡nto tiempo se guardan los resultados?**
> Los resultados se mantienen disponibles por 24 horas, despuÃ©s se eliminan automÃ¡ticamente.

**Â¿Puedo integrar esto con mi CRM?**
> PrÃ³ximamente tendremos API REST para integraciones. ContÃ¡ctanos para mÃ¡s informaciÃ³n.

**Â¿Hay lÃ­mites de uso?**
> El lÃ­mite es 3000 comentarios por archivo y 20MB de tamaÃ±o mÃ¡ximo.

---

## ğŸ› ï¸ InformaciÃ³n TÃ©cnica

<details>
<summary><b>Para Desarrolladores y Equipos TÃ©cnicos (Click para expandir)</b></summary>

### Arquitectura del Sistema

**Stack TecnolÃ³gico:**
- Frontend: React 18.3 + TypeScript + Tailwind CSS
- Backend: FastAPI + Celery + Redis
- AI: OpenAI GPT-4o-mini (87% optimizado)
- Deployment: Render.com con 4 servicios distribuidos

### CaracterÃ­sticas TÃ©cnicas Destacadas

#### ğŸš€ OptimizaciÃ³n Ultra-Eficiente
- **87% reducciÃ³n en costos** de OpenAI API con anÃ¡lisis hÃ­brido
- **AnÃ¡lisis local gratuito**: Sentiment (VADER/TextBlob) sin costo
- **OpenAI selectivo**: Solo para churn risk y pain points complejos
- Procesamiento de **25-30 tokens/comentario** (antes: 250)
- Sistema de **deduplicaciÃ³n inteligente SHA256** (15-20% ahorro)
- **Cache de comentarios** en Redis (7 dÃ­as TTL)
- **Batching dinÃ¡mico** de 50-100 comentarios con gestiÃ³n de memoria

#### ğŸ¨ Funcionalidades Clave v3.2
- **Excel profesional** con hojas formateadas, grÃ¡ficos y formato condicional
- **Parser flexible** con detecciÃ³n dinÃ¡mica de columnas (Nota, Comentario Final, NPS)
- **Monitor de event loops** para debugging de procesamiento asÃ­ncrono
- **Hybrid Analyzer**: Combina anÃ¡lisis local + IA para mÃ¡xima eficiencia
- **GestiÃ³n de memoria**: Batch sizing adaptativo segÃºn recursos disponibles

#### ğŸ”§ Arquitectura Robusta
```
Usuario â†’ React â†’ BFF Proxy â†’ FastAPI â†’ Celery â†’ OpenAI
                                â†“
                            Redis Cache
```

#### ğŸ“Š MÃ©tricas de Performance
- Success rate: >99%
- Throughput: 40 comentarios/segundo
- Latencia API: <100ms p99
- Disponibilidad: 99.9% SLA
- DeduplicaciÃ³n: 25-35% ahorro en llamadas API

### InstalaciÃ³n Local

#### Requisitos
- Python 3.11+
- Node.js 18+
- Redis 7.0+
- 4GB RAM mÃ­nimo

#### Setup RÃ¡pido
```bash
# Clonar repositorio
git clone https://github.com/yourusername/customer-feedback-app.git
cd customer-feedback-app

# Backend
cd api/
pip install -r requirements.txt
uvicorn app.main:app --reload --port 8000

# Worker (en otra terminal)
celery -A app.workers.celery_app worker --loglevel=INFO --concurrency=4

# Frontend (en otra terminal)
cd web/
npm install
npm run dev
```

#### Variables de Entorno CrÃ­ticas
```bash
# .env para desarrollo local
OPENAI_API_KEY=sk-xxxxx
REDIS_URL=redis://localhost:6379
AI_MODEL=gpt-4o-mini
BATCH_SIZE_OPTIMAL=120
CELERY_WORKER_CONCURRENCY=4
NPS_CALCULATION_METHOD=shifted  # Nuevo: NPS siempre positivo
EXCEL_FORMATTING_ENABLED=true   # Excel profesional con grÃ¡ficos
ENABLE_COMMENT_CACHE=true       # Cache de comentarios (7 dÃ­as TTL)
PARSER_TYPE=flexible             # Parser dinÃ¡mico de columnas
ENABLE_PARALLEL_PROCESSING=true # Procesamiento paralelo habilitado
HYBRID_ANALYSIS_ENABLED=true    # AnÃ¡lisis hÃ­brido (local + OpenAI)
```

### API REST

#### Subir Archivo
```bash
POST /upload
Content-Type: multipart/form-data

Respuesta:
{
  "task_id": "uuid-v4",
  "status": "pending",
  "message": "File uploaded successfully"
}
```

#### Consultar Estado
```bash
GET /status/{task_id}

Respuesta:
{
  "task_id": "uuid-v4",
  "status": "completed",
  "progress": 100,
  "message": "Analysis complete",
  "processed_rows": 500
}
```

#### Obtener Resultados
```bash
GET /results/{task_id}

Respuesta:
{
  "summary": {
    "total_comments": 500,
    "avg_sentiment": 0.65,
    "nps_score": 42
  },
  "emotions_summary": {...},
  "pain_points": [...],
  "detailed_results": [...]
}
```

#### Exportar Resultados
```bash
GET /export/{task_id}?format=xlsx

Formatos disponibles: csv, xlsx, all
```

### Deployment en Render.com

#### Servicios Requeridos
1. **customer-feedback-app** (Web Service) - Public
2. **customer-feedback-api** (Web Service) - Private
3. **customer-feedback-worker** (Background Worker) - Private
4. **feedback-analyzer-redis** (Redis) - External

#### ConfiguraciÃ³n CrÃ­tica del Worker
```bash
# IMPORTANTE: URLs completas, no usar ${REDIS_URL}
REDIS_URL=redis://red-xxxxx:6379
CELERY_BROKER_URL=redis://red-xxxxx:6379
CELERY_RESULT_BACKEND=redis://red-xxxxx:6379
OPENAI_API_KEY=sk-xxxxx
```

### Monitoreo y Logs

El sistema incluye logging estructurado completo:
```json
{
  "event": "Batch processing summary",
  "total_batches": 12,
  "completed": 12,
  "success_rate": 100,
  "total_tokens_used": 28980,
  "tokens_per_comment": 25.3,
  "deduplication_savings": 32.5
}
```

### Contribuir

1. Fork el proyecto
2. Crea tu feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit tus cambios (`git commit -m 'Add some AmazingFeature'`)
4. Push al branch (`git push origin feature/AmazingFeature`)
5. Abre un Pull Request

### DocumentaciÃ³n TÃ©cnica Completa

Para mÃ¡s detalles tÃ©cnicos, consulta:
- [Ãndice de DocumentaciÃ³n](docs/README.md) - Punto de entrada a toda la documentaciÃ³n
- [DocumentaciÃ³n TÃ©cnica Completa](docs/TECHNICAL_DOCUMENTATION.md) - Arquitectura y detalles de implementaciÃ³n
- [Arquitectura Frontend](docs/FRONTEND_ARCHITECTURE.md) - Estructura y componentes del frontend
- [GuÃ­a de Deployment en Render](docs/RENDER_DEPLOYMENT.md) - ConfiguraciÃ³n de despliegue
- [IntegraciÃ³n de Servicios](docs/SERVICE_INTEGRATION.md) - ComunicaciÃ³n entre servicios

</details>

---

## ğŸ“ Soporte

Â¿Necesitas ayuda o tienes sugerencias?

- ğŸ“§ Email: support@feedbackanalyzer.com
- ğŸ’¬ Chat: Disponible en la aplicaciÃ³n
- ğŸ“– [DocumentaciÃ³n completa](docs/)
- ğŸ› [Reportar un bug](https://github.com/yourusername/customer-feedback-app/issues)

---

## ğŸ“œ Licencia

Este proyecto estÃ¡ licenciado bajo MIT License - ver [LICENSE](LICENSE) para mÃ¡s detalles.

---

**Desarrollado por AI Whisperers Team**

*VersiÃ³n 3.2.0 - Estado: PRODUCCIÃ“N - Ãšltima actualizaciÃ³n: 27 de Septiembre 2024*

### Cambios Recientes (v3.2.0)

#### Frontend
- âœ… RefactorizaciÃ³n completa de componentes (Clean Architecture)
- âœ… Code splitting y lazy loading (65% reducciÃ³n de bundle)
- âœ… Componentes modulares: ResultsCharts (380â†’65 lÃ­neas), FileUpload (251â†’100 lÃ­neas)
- âœ… Glass Design System implementado
- âœ… TypeScript estricto con tipos explÃ­citos

#### Backend
- âœ… AnÃ¡lisis hÃ­brido: Sentiment local (VADER/TextBlob) + OpenAI
- âœ… Procesamiento paralelo con event loop optimizado
- âœ… DeduplicaciÃ³n inteligente SHA256 (15-20% ahorro)
- âœ… Excel profesional con grÃ¡ficos y formato condicional
- âœ… Parser flexible con detecciÃ³n dinÃ¡mica de columnas
- âœ… GestiÃ³n de memoria dinÃ¡mica (batch sizing adaptativo)
- âœ… Cache de comentarios con 7 dÃ­as TTL